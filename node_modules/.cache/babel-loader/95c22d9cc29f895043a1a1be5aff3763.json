{"ast":null,"code":"import \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport \"antd/es/notification/style\";\nimport _notification from \"antd/es/notification\";\nvar _jsxFileName = \"/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/User/Workshop/Add.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { CREATEWORKSHOP } from \"../../../Gql/Mutation\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Step } from \"./Step\";\nimport { ArrowLeftOutlined } from \"@ant-design/icons\";\nimport { useStep } from \"../../../hooks/UseStep\";\nimport Client from \"../../../Client\";\nimport { UserLayout } from \"../../Shared/UserLayout\";\nimport { WorkShopForm } from \"./Form\";\nimport { AddressForm } from \"../Form\";\nexport const Add = () => {\n  const {\n    token\n  } = useParams();\n  const history = useHistory();\n  const {\n    current,\n    next,\n    prev\n  } = useStep(0, 2);\n  const [workshop, setWorkshop] = useState(null);\n  const [flash, setFlash] = useState(true);\n  useEffect(() => {\n    if (flash) {\n      _notification.open({\n        message: \"Félication ! Veillez renseigner les informations sur votre atelier\"\n      });\n\n      setFlash(false);\n    }\n  }, [flash]);\n\n  const onFinishWorkshop = values => {\n    setWorkshop(values);\n    next();\n  };\n\n  const onFinishAddress = ({\n    action,\n    ...values\n  }) => {\n    Client({\n      token\n    }).mutate({\n      mutation: CREATEWORKSHOP,\n      variables: {\n        addWorkshop: { ...values,\n          ...workshop\n        }\n      }\n    }).then(() => {\n      _message.success(\"Ajout réussi !\");\n\n      history.push(\"/login\");\n    }).catch(error => {\n      console.log(error);\n\n      _message.error(\"Une erreur est survenue réessayer plus tard !\");\n    });\n    next();\n  };\n\n  return /*#__PURE__*/React.createElement(UserLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Row, {\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Col, {\n    xs: 24,\n    md: 16,\n    lg: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Step, {\n    current: current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(_Card, {\n    title: current > 0 && /*#__PURE__*/React.createElement(_Button, {\n      onClick: prev,\n      type: \"link\",\n      icon: /*#__PURE__*/React.createElement(ArrowLeftOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 58\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, \"Retour\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, current === 0 && /*#__PURE__*/React.createElement(WorkShopForm, {\n    initialValues: null,\n    onFinish: onFinishWorkshop,\n    loading: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }), current === 1 && /*#__PURE__*/React.createElement(AddressForm, {\n    initialValues: null,\n    onFinish: onFinishAddress,\n    loading: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  })))));\n};","map":{"version":3,"sources":["/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/User/Workshop/Add.tsx"],"names":["React","useState","useEffect","CREATEWORKSHOP","useParams","useHistory","Step","ArrowLeftOutlined","useStep","Client","UserLayout","WorkShopForm","AddressForm","Add","token","history","current","next","prev","workshop","setWorkshop","flash","setFlash","open","message","onFinishWorkshop","values","onFinishAddress","action","mutate","mutation","variables","addWorkshop","then","success","push","catch","error","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Row, Col, Card, notification, message, Button } from \"antd\";\nimport { CREATEWORKSHOP } from \"../../../Gql/Mutation\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Step } from \"./Step\";\nimport { ArrowLeftOutlined } from \"@ant-design/icons\";\nimport { useStep } from \"../../../hooks/UseStep\";\nimport Client from \"../../../Client\";\nimport { UserLayout } from \"../../Shared/UserLayout\";\nimport { WorkShopForm } from \"./Form\";\nimport { AddressForm } from \"../Form\";\n\nexport const Add = () => {\n  const { token } = useParams();\n  const history = useHistory();\n  const { current, next, prev } = useStep(0, 2);\n  const [workshop, setWorkshop] = useState(null);\n  const [flash, setFlash] = useState(true);\n\n  useEffect(() => {\n    if (flash) {\n      notification.open({\n        message:\n          \"Félication ! Veillez renseigner les informations sur votre atelier\",\n      });\n      setFlash(false);\n    }\n  }, [flash]);\n\n  const onFinishWorkshop = (values) => {\n    setWorkshop(values);\n    next();\n  };\n\n  const onFinishAddress = ({ action, ...values }) => {\n    Client({ token })\n      .mutate({\n        mutation: CREATEWORKSHOP,\n        variables: { addWorkshop: { ...values, ...workshop } },\n      })\n      .then(() => {\n        message.success(\"Ajout réussi !\");\n        history.push(\"/login\");\n      })\n      .catch((error) => {\n        console.log(error);\n        message.error(\"Une erreur est survenue réessayer plus tard !\");\n      });\n    next();\n  };\n\n  return (\n    <UserLayout>\n      <Row justify=\"center\">\n        <Col xs={24} md={16} lg={10}>\n          <Card>\n            <Step current={current} />\n          </Card>\n          <Card\n            title={\n              current > 0 && (\n                <Button onClick={prev} type=\"link\" icon={<ArrowLeftOutlined />}>\n                  Retour\n                </Button>\n              )\n            }\n          >\n            {current === 0 && (\n              <WorkShopForm\n                initialValues={null}\n                onFinish={onFinishWorkshop}\n                loading={false}\n              />\n            )}\n            {current === 1 && (\n              <AddressForm\n                initialValues={null}\n                onFinish={onFinishAddress}\n                loading={false}\n              />\n            )}\n          </Card>\n        </Col>\n      </Row>\n    </UserLayout>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}