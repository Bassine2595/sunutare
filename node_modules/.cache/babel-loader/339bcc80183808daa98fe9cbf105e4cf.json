{"ast":null,"code":"import \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/ForgetPassword/GenerateLinkReset.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { UserLayout } from \"../Shared/UserLayout\";\nimport { MailForm } from \"./Form\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { GENERATETOKEN } from \"../../Gql/Mutation\";\nimport { checKMail } from \"../../Service\";\nexport const GenerateLinkReset = () => {\n  const [generateToken, {\n    loading\n  }] = useMutation(GENERATETOKEN);\n  const [values, setValues] = useState(null);\n  useEffect(() => {\n    if (values) {\n      checKMail({\n        url: `${process.env.REACT_APP_ROOT}/activate/${values.jwtToken}`,\n        mail: values.mail,\n        message: \"Votre compte sunutare a été créé avec succès Vous devez maintenant l'activer pour être en mesure de vous connecter. \"\n      }).then(() => {});\n    }\n  }, [values]);\n\n  const onFinish = ({\n    mail\n  }) => {\n    generateToken({\n      variables: {\n        mail\n      }\n    }).then(({\n      data: {\n        token\n      }\n    }) => {\n      const {\n        jwtToken\n      } = token;\n\n      if (!jwtToken) {\n        _message.info(\"Ce compte n'existe pas !\");\n      } else {\n        setValues({\n          mail,\n          jwtToken\n        });\n\n        _message.info(\"Un lien de réinitialisation de mot de passe vous est envoyé par mail !\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(UserLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Row, {\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Col, {\n    xs: 24,\n    md: 16,\n    lg: 10,\n    xl: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, values ? /*#__PURE__*/React.createElement(_Button, {\n    type: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, \"Cliquez ici si vous ne recevez pas un mail\") : /*#__PURE__*/React.createElement(_Card, {\n    title: \"Saisisser votre mail pour r\\xE9initialiser votre mot de passe !\",\n    hoverable: true,\n    style: {\n      borderRadius: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MailForm, {\n    onFinish: onFinish,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  })))));\n};","map":{"version":3,"sources":["/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/ForgetPassword/GenerateLinkReset.tsx"],"names":["React","useState","useEffect","UserLayout","MailForm","useMutation","GENERATETOKEN","checKMail","GenerateLinkReset","generateToken","loading","values","setValues","url","process","env","REACT_APP_ROOT","jwtToken","mail","message","then","onFinish","variables","data","token","info","borderRadius"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,sBAA3B;AAEA,SAASC,QAAT,QAAyB,QAAzB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,aAAT,QAA8B,oBAA9B;AACA,SAASC,SAAT,QAA0B,eAA1B;AAEA,OAAO,MAAMC,iBAAiB,GAAG,MAAM;AACrC,QAAM,CAACC,aAAD,EAAgB;AAAEC,IAAAA;AAAF,GAAhB,IAA+BL,WAAW,CAACC,aAAD,CAAhD;AACA,QAAM,CAACK,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,IAAD,CAApC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIS,MAAJ,EAAY;AACVJ,MAAAA,SAAS,CAAC;AACRM,QAAAA,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAR,CAAYC,cAAe,aAAYL,MAAM,CAACM,QAAS,EADvD;AAERC,QAAAA,IAAI,EAAEP,MAAM,CAACO,IAFL;AAGRC,QAAAA,OAAO,EACL;AAJM,OAAD,CAAT,CAKGC,IALH,CAKQ,MAAM,CAAE,CALhB;AAMD;AACF,GATQ,EASN,CAACT,MAAD,CATM,CAAT;;AAUA,QAAMU,QAAQ,GAAG,CAAC;AAAEH,IAAAA;AAAF,GAAD,KAAc;AAC7BT,IAAAA,aAAa,CAAC;AAAEa,MAAAA,SAAS,EAAE;AAAEJ,QAAAA;AAAF;AAAb,KAAD,CAAb,CAAuCE,IAAvC,CAA4C,CAAC;AAAEG,MAAAA,IAAI,EAAE;AAAEC,QAAAA;AAAF;AAAR,KAAD,KAAyB;AACnE,YAAM;AAAEP,QAAAA;AAAF,UAAeO,KAArB;;AACA,UAAI,CAACP,QAAL,EAAe;AACb,iBAAQQ,IAAR,CAAa,0BAAb;AACD,OAFD,MAEO;AACLb,QAAAA,SAAS,CAAC;AAAEM,UAAAA,IAAF;AAAQD,UAAAA;AAAR,SAAD,CAAT;;AACA,iBAAQQ,IAAR,CACE,wEADF;AAGD;AACF,KAVD;AAWD,GAZD;;AAcA,sBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,OAAO,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,EAAE,EAAE,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGd,MAAM,gBACL;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDADK,gBAKL;AACE,IAAA,KAAK,EAAC,iEADR;AAEE,IAAA,SAAS,MAFX;AAGE,IAAA,KAAK,EAAE;AAAEe,MAAAA,YAAY,EAAE;AAAhB,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAEL,QAApB;AAA8B,IAAA,OAAO,EAAEX,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CANJ,CADF,CADF,CADF;AAqBD,CAjDM","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { UserLayout } from \"../Shared/UserLayout\";\nimport { Row, Col, Card, message, Button } from \"antd\";\nimport { MailForm } from \"./Form\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { GENERATETOKEN } from \"../../Gql/Mutation\";\nimport { checKMail } from \"../../Service\";\n\nexport const GenerateLinkReset = () => {\n  const [generateToken, { loading }] = useMutation(GENERATETOKEN);\n  const [values, setValues] = useState(null);\n\n  useEffect(() => {\n    if (values) {\n      checKMail({\n        url: `${process.env.REACT_APP_ROOT}/activate/${values.jwtToken}`,\n        mail: values.mail,\n        message:\n          \"Votre compte sunutare a été créé avec succès Vous devez maintenant l'activer pour être en mesure de vous connecter. \",\n      }).then(() => {});\n    }\n  }, [values]);\n  const onFinish = ({ mail }) => {\n    generateToken({ variables: { mail } }).then(({ data: { token } }) => {\n      const { jwtToken } = token;\n      if (!jwtToken) {\n        message.info(\"Ce compte n'existe pas !\");\n      } else {\n        setValues({ mail, jwtToken });\n        message.info(\n          \"Un lien de réinitialisation de mot de passe vous est envoyé par mail !\"\n        );\n      }\n    });\n  };\n\n  return (\n    <UserLayout>\n      <Row justify=\"center\">\n        <Col xs={24} md={16} lg={10} xl={8}>\n          {values ? (\n            <Button type=\"primary\">\n              Cliquez ici si vous ne recevez pas un mail\n            </Button>\n          ) : (\n            <Card\n              title=\"Saisisser votre mail pour réinitialiser votre mot de passe !\"\n              hoverable\n              style={{ borderRadius: 8 }}\n            >\n              <MailForm onFinish={onFinish} loading={loading} />\n            </Card>\n          )}\n        </Col>\n      </Row>\n    </UserLayout>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}