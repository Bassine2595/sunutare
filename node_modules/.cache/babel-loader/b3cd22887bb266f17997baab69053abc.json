{"ast":null,"code":"import \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport \"antd/es/notification/style\";\nimport _notification from \"antd/es/notification\";\nvar _jsxFileName = \"/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/Register/Register.tsx\";\nimport React, { useState } from \"react\";\nimport { UserLayout } from \"../Shared/UserLayout\";\nimport { RegisterForm } from \"./Form\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { REGISTER } from \"../../Gql/Mutation\";\nimport _ from \"lodash\";\nimport { checKMail } from \"../../Service\";\nexport const Register = () => {\n  const [addUser, {\n    loading\n  }] = useMutation(REGISTER);\n  const [reset, setReset] = useState(0);\n\n  const onFinish = ({\n    confirm,\n    agreement,\n    ...values\n  }) => {\n    addUser({\n      variables: {\n        input: values\n      }\n    }).then(data => {\n      const {\n        register: {\n          jwtToken\n        }\n      } = data.data;\n      checKMail({\n        url: `${process.env.REACT_APP_ROOT}/activate/${jwtToken}`,\n        mail: values.mail,\n        message: \"Votre compte sunutare a été créé avec succès. Vous devez maintenant l'activer pour être en mesure de vous connecter. \"\n      }).then(() => {\n        _notification.success({\n          message: \"Votre compte sunutare a été créé avec succès. Vous devez maintenant l'activer pour être en mesure de vous connecter.\",\n          description: \"Consulter votre boite pour l'activer !\",\n          duration: 0\n        });\n\n        setReset(reset => reset + 1);\n      }).catch(() => {\n        _notification.error({\n          message: \"Une erreur est survenue !\"\n        });\n      });\n    }).catch(reason => {\n      _message.info(_.includes(reason.message, \"unique\") ? \"L'adresse E-mail ou le numéro de téléphone existe déja !\" : \"Erreur réessayer plus tart !\");\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(UserLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Row, {\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Col, {\n    xs: 24,\n    md: 16,\n    lg: 10,\n    xl: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Card, {\n    hoverable: true,\n    title: \"Cr\\xE9ation de compte\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(RegisterForm, {\n    onFinish: onFinish,\n    loading: loading,\n    key: reset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  })))));\n};","map":{"version":3,"sources":["/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/Register/Register.tsx"],"names":["React","useState","UserLayout","RegisterForm","useMutation","REGISTER","_","checKMail","Register","addUser","loading","reset","setReset","onFinish","confirm","agreement","values","variables","input","then","data","register","jwtToken","url","process","env","REACT_APP_ROOT","mail","message","success","description","duration","catch","error","reason","info","includes"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,UAAT,QAA2B,sBAA3B;AACA,SAASC,YAAT,QAA6B,QAA7B;AAEA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,SAAT,QAA0B,eAA1B;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC5B,QAAM,CAACC,OAAD,EAAU;AAAEC,IAAAA;AAAF,GAAV,IAAyBN,WAAW,CAACC,QAAD,CAA1C;AACA,QAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,CAAD,CAAlC;;AAEA,QAAMY,QAAQ,GAAG,CAAC;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,SAAX;AAAsB,OAAGC;AAAzB,GAAD,KAAuC;AACtDP,IAAAA,OAAO,CAAC;AAAEQ,MAAAA,SAAS,EAAE;AAAEC,QAAAA,KAAK,EAAEF;AAAT;AAAb,KAAD,CAAP,CACGG,IADH,CACSC,IAAD,IAAU;AACd,YAAM;AACJC,QAAAA,QAAQ,EAAE;AAAEC,UAAAA;AAAF;AADN,UAEFF,IAAI,CAACA,IAFT;AAGAb,MAAAA,SAAS,CAAC;AACRgB,QAAAA,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAR,CAAYC,cAAe,aAAYJ,QAAS,EADhD;AAERK,QAAAA,IAAI,EAAEX,MAAM,CAACW,IAFL;AAGRC,QAAAA,OAAO,EACL;AAJM,OAAD,CAAT,CAMGT,IANH,CAMQ,MAAM;AACV,sBAAaU,OAAb,CAAqB;AACnBD,UAAAA,OAAO,EACL,sHAFiB;AAGnBE,UAAAA,WAAW,EAAE,wCAHM;AAInBC,UAAAA,QAAQ,EAAE;AAJS,SAArB;;AAMAnB,QAAAA,QAAQ,CAAED,KAAD,IAAWA,KAAK,GAAG,CAApB,CAAR;AACD,OAdH,EAeGqB,KAfH,CAeS,MAAM;AACX,sBAAaC,KAAb,CAAmB;AACjBL,UAAAA,OAAO,EAAE;AADQ,SAAnB;AAGD,OAnBH;AAoBD,KAzBH,EA0BGI,KA1BH,CA0BUE,MAAD,IAAY;AACjB,eAAQC,IAAR,CACE7B,CAAC,CAAC8B,QAAF,CAAWF,MAAM,CAACN,OAAlB,EAA2B,QAA3B,IACI,0DADJ,GAEI,8BAHN;AAKD,KAhCH;AAiCD,GAlCD;;AAoCA,sBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,OAAO,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,EAAE,EAAE,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,KAAK,EAAC,uBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAEf,QAAxB;AAAkC,IAAA,OAAO,EAAEH,OAA3C;AAAoD,IAAA,GAAG,EAAEC,KAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,CADF,CADF;AAWD,CAnDM","sourcesContent":["import React, { useState } from \"react\";\nimport { UserLayout } from \"../Shared/UserLayout\";\nimport { RegisterForm } from \"./Form\";\nimport { Row, Col, Card, message, notification } from \"antd\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { REGISTER } from \"../../Gql/Mutation\";\nimport _ from \"lodash\";\nimport { checKMail } from \"../../Service\";\n\nexport const Register = () => {\n  const [addUser, { loading }] = useMutation(REGISTER);\n  const [reset, setReset] = useState(0);\n\n  const onFinish = ({ confirm, agreement, ...values }) => {\n    addUser({ variables: { input: values } })\n      .then((data) => {\n        const {\n          register: { jwtToken },\n        } = data.data;\n        checKMail({\n          url: `${process.env.REACT_APP_ROOT}/activate/${jwtToken}`,\n          mail: values.mail,\n          message:\n            \"Votre compte sunutare a été créé avec succès. Vous devez maintenant l'activer pour être en mesure de vous connecter. \",\n        })\n          .then(() => {\n            notification.success({\n              message:\n                \"Votre compte sunutare a été créé avec succès. Vous devez maintenant l'activer pour être en mesure de vous connecter.\",\n              description: \"Consulter votre boite pour l'activer !\",\n              duration: 0,\n            });\n            setReset((reset) => reset + 1);\n          })\n          .catch(() => {\n            notification.error({\n              message: \"Une erreur est survenue !\",\n            });\n          });\n      })\n      .catch((reason) => {\n        message.info(\n          _.includes(reason.message, \"unique\")\n            ? \"L'adresse E-mail ou le numéro de téléphone existe déja !\"\n            : \"Erreur réessayer plus tart !\"\n        );\n      });\n  };\n\n  return (\n    <UserLayout>\n      <Row justify=\"center\">\n        <Col xs={24} md={16} lg={10} xl={8}>\n          <Card hoverable title=\"Création de compte\">\n            <RegisterForm onFinish={onFinish} loading={loading} key={reset} />\n          </Card>\n        </Col>\n      </Row>\n    </UserLayout>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}