{"ast":null,"code":"import \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/skeleton/style\";\nimport _Skeleton from \"antd/es/skeleton\";\nimport \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/page-header/style\";\nimport _PageHeader from \"antd/es/page-header\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/User/Modele/Modele.tsx\";\nimport React, { useState, useContext } from \"react\";\nimport { Theme } from \"../../Shared/ManagerLayout\";\nimport { PlusCircleOutlined } from \"@ant-design/icons\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { MODELES } from \"../../../Gql/Query\";\nimport { UserContext } from \"../../Context\";\nimport { Display } from \"./Display\";\nimport { Add } from \"./Add\";\nimport { FormFilter } from \"./Form\";\nimport { DELETEMODELE } from \"../../../Gql/Mutation\";\nimport { Update } from \"./Update\";\nimport { useModal } from \"../../../hooks/useModal\";\nimport { deleteConfirm } from \"../../Shared/Confirm\";\nimport { useMediaQuery } from \"react-responsive\";\nexport const Modele = () => {\n  var _user$workshop;\n\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    data,\n    loading,\n    refetch\n  } = useQuery(MODELES, {\n    variables: {\n      workshopId: (_user$workshop = user.workshop) === null || _user$workshop === void 0 ? void 0 : _user$workshop.id\n    }\n  });\n  const [deleteModele] = useMutation(DELETEMODELE);\n  const [modele, setModele] = useState();\n  const [addModal, addModalToggle] = useModal();\n  const [updateModal, updateModalToggle] = useModal();\n  const isSm = useMediaQuery({\n    query: \"(max-width: 576px)\"\n  });\n  const isMd = useMediaQuery({\n    query: \"(max-width: 768px)\"\n  });\n\n  const onFinish = values => {\n    refetch({ ...values\n    });\n  };\n\n  const onDelete = id => {\n    deleteConfirm({\n      onCancel: null,\n      onOk: () => {\n        deleteModele({\n          variables: {\n            id\n          }\n        }).then(() => {\n          _message.success(\"modele supprimé avec succès !\");\n\n          refetch();\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Theme, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Row, {\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Col, {\n    xs: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Add, {\n    visible: addModal,\n    onCancel: addModalToggle,\n    onError: () => {\n      _message.error(\"Une erreu est suvenue réessayer plus tard !\");\n    },\n    onSuccess: () => {\n      addModalToggle();\n\n      _message.success(\"Ajout réussi !\");\n\n      refetch();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Update, {\n    visible: updateModal,\n    onCancel: () => updateModalToggle(),\n    onError: () => {\n      _message.error(\"Une erreu est suvenue réessayer plus tard !\");\n    },\n    onSuccess: () => {\n      _message.success(\"Modèle modifier avec succès !\");\n\n      updateModalToggle();\n      refetch();\n    },\n    modele: modele,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(_PageHeader, {\n    ghost: false,\n    title: \"Modeles\",\n    onBack: () => window.history.back(),\n    extra: [/*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      shape: \"round\",\n      onClick: addModalToggle,\n      key: \"add\",\n      icon: /*#__PURE__*/React.createElement(PlusCircleOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 23\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }\n    }, !isMd && \"Ajouter un modele\")],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }), !isSm && /*#__PURE__*/React.createElement(_Card, {\n    style: {\n      marginBottom: 20\n    },\n    title: \"Filtre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormFilter, {\n    onFinish: onFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  })), loading ? /*#__PURE__*/React.createElement(_Skeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(_Row, {\n    gutter: [24, 24],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, data === null || data === void 0 ? void 0 : data.modeles.nodes.map(modele => /*#__PURE__*/React.createElement(_Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    lg: 6,\n    key: modele.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Display, Object.assign({}, modele, {\n    onDelete: onDelete,\n    onEdit: () => {\n      setModele(modele);\n      updateModalToggle();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }))))))));\n};","map":{"version":3,"sources":["/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/User/Modele/Modele.tsx"],"names":["React","useState","useContext","Theme","PlusCircleOutlined","useQuery","useMutation","MODELES","UserContext","Display","Add","FormFilter","DELETEMODELE","Update","useModal","deleteConfirm","useMediaQuery","Modele","user","data","loading","refetch","variables","workshopId","workshop","id","deleteModele","modele","setModele","addModal","addModalToggle","updateModal","updateModalToggle","isSm","query","isMd","onFinish","values","onDelete","onCancel","onOk","then","success","error","window","history","back","marginBottom","modeles","nodes","map"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Theme } from \"../../Shared/ManagerLayout\";\nimport { Row, Col, Card, message, PageHeader, Button, Skeleton } from \"antd\";\nimport { PlusCircleOutlined } from \"@ant-design/icons\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { MODELES } from \"../../../Gql/Query\";\nimport { UserContext } from \"../../Context\";\nimport { Display } from \"./Display\";\nimport { Add } from \"./Add\";\nimport { FormFilter } from \"./Form\";\nimport { DELETEMODELE } from \"../../../Gql/Mutation\";\nimport { Update } from \"./Update\";\nimport { useModal } from \"../../../hooks/useModal\";\nimport { deleteConfirm } from \"../../Shared/Confirm\";\nimport { useMediaQuery } from \"react-responsive\";\n\nexport const Modele = () => {\n  const { user } = useContext(UserContext);\n  const { data, loading, refetch } = useQuery(MODELES, {\n    variables: {\n      workshopId: user.workshop?.id,\n    },\n  });\n  const [deleteModele] = useMutation(DELETEMODELE);\n  const [modele, setModele] = useState();\n  const [addModal, addModalToggle] = useModal();\n  const [updateModal, updateModalToggle] = useModal();\n  const isSm = useMediaQuery({ query: \"(max-width: 576px)\" });\n  const isMd = useMediaQuery({ query: \"(max-width: 768px)\" });\n\n  const onFinish = (values) => {\n    refetch({\n      ...values,\n    });\n  };\n  const onDelete = (id) => {\n    deleteConfirm({\n      onCancel: null,\n      onOk: () => {\n        deleteModele({ variables: { id } }).then(() => {\n          message.success(\"modele supprimé avec succès !\");\n          refetch();\n        });\n      },\n    });\n  };\n\n  return (\n    <Theme>\n      <Row justify=\"center\">\n        <Col xs={24}>\n          <Add\n            visible={addModal}\n            onCancel={addModalToggle}\n            onError={() => {\n              message.error(\"Une erreu est suvenue réessayer plus tard !\");\n            }}\n            onSuccess={() => {\n              addModalToggle();\n              message.success(\"Ajout réussi !\");\n              refetch();\n            }}\n          />\n          <Update\n            visible={updateModal}\n            onCancel={() => updateModalToggle()}\n            onError={() => {\n              message.error(\"Une erreu est suvenue réessayer plus tard !\");\n            }}\n            onSuccess={() => {\n              message.success(\"Modèle modifier avec succès !\");\n              updateModalToggle();\n              refetch();\n            }}\n            modele={modele}\n          />\n          <PageHeader\n            ghost={false}\n            title=\"Modeles\"\n            onBack={() => window.history.back()}\n            extra={[\n              <Button\n                type=\"primary\"\n                shape=\"round\"\n                onClick={addModalToggle}\n                key=\"add\"\n                icon={<PlusCircleOutlined />}\n              >\n                {!isMd && \"Ajouter un modele\"}\n              </Button>,\n            ]}\n          />\n          {!isSm && (\n            <Card style={{ marginBottom: 20 }} title=\"Filtre\">\n              <FormFilter onFinish={onFinish} />\n            </Card>\n          )}\n          {loading ? (\n            <Skeleton />\n          ) : (\n            <Row gutter={[24, 24]}>\n              {data?.modeles.nodes.map((modele) => (\n                <Col xs={24} sm={24} md={12} lg={6} key={modele.id}>\n                  <Display\n                    {...modele}\n                    onDelete={onDelete}\n                    onEdit={() => {\n                      setModele(modele);\n                      updateModalToggle();\n                    }}\n                  />\n                </Col>\n              ))}\n            </Row>\n          )}\n        </Col>\n      </Row>\n    </Theme>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}