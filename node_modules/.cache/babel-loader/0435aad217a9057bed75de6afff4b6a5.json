{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nvar _jsxFileName = \"/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/User/Customer/Contact.tsx\";\nimport React, { useContext } from \"react\";\nimport { ContactForm } from \"./Form\";\nimport { MESSAGEBYSUBJECT } from \"../../../Gql/Query\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { UserContext } from \"../../Context\";\nimport { ContactClienBytMail } from \"../../../Service\";\nimport { ButtonSend, ButtonCancel } from \"../../Shared/Button\";\nimport { useForm } from \"antd/lib/form/util\";\nexport const Contact = ({\n  customer,\n  visible,\n  onCancel,\n  onSuccess,\n  onError\n}) => {\n  const {\n    data,\n    loading\n  } = useQuery(MESSAGEBYSUBJECT, {\n    variables: {\n      subject: \"Info\"\n    }\n  });\n  console.log(data);\n  const [form] = useForm();\n  const {\n    user\n  } = useContext(UserContext);\n\n  const onFinish = () => {\n    form.validateFields().then(({\n      subject\n    }) => {\n      ContactClienBytMail({\n        mail: customer.mail,\n        name: customer === null || customer === void 0 ? void 0 : customer.last_name,\n        message: subject === \"Nouveautés\" ? data === null || data === void 0 ? void 0 : data.messages.nodes[1].message.replace(\"{fullName}\", customer === null || customer === void 0 ? void 0 : customer.fullName).replace(\"{workshopName}\", user.workshop.name) : data === null || data === void 0 ? void 0 : data.messages.nodes[0].message.replace(\"{fullName}\", customer === null || customer === void 0 ? void 0 : customer.fullName).replace(\"{workshopName}\", user.workshop.name),\n        subject: subject,\n        url: subject == \"Nouveautés\" ? `${process.env.REACT_APP_ROOT}/galerie` : ``\n      }).then(res => {\n        onSuccess(res);\n        console.log(res);\n      }).catch(err => {\n        onError(err);\n        console.log(err);\n      });\n    }).catch(info => {\n      console.log(info);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(_Modal, {\n    closable: false,\n    visible: visible,\n    bodyStyle: {\n      margin: 20\n    },\n    width: 600,\n    footer: [/*#__PURE__*/React.createElement(ButtonSend, {\n      key: \"send\",\n      onClick: onFinish,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(ButtonCancel, {\n      key: \"cancel\",\n      onClick: onCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    })],\n    title: \"Contacter vos clients\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ContactForm, {\n    form: form,\n    initialValues: customer\n    /* messages={data?.messages.nodes.map(({ id, message }) => ({\n      id: id,\n      message: message\n         .replace(\"{fullName}\", customer?.fullName)\n        .replace(\"{workshopName}\", user.workshop.name),\n    }))}*/\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }));\n};","map":{"version":3,"sources":["/home/bassine/Documents/ProjetSunutare/frontend-manager/src/component/User/Customer/Contact.tsx"],"names":["React","useContext","ContactForm","MESSAGEBYSUBJECT","useQuery","UserContext","ContactClienBytMail","ButtonSend","ButtonCancel","useForm","Contact","customer","visible","onCancel","onSuccess","onError","data","loading","variables","subject","console","log","form","user","onFinish","validateFields","then","mail","name","last_name","message","messages","nodes","replace","fullName","workshop","url","process","env","REACT_APP_ROOT","res","catch","err","info","margin"],"mappings":"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","sourcesContent":["import { Modal, message } from \"antd\";\nimport React, { useContext } from \"react\";\nimport { ContactForm } from \"./Form\";\nimport { MESSAGEBYSUBJECT } from \"../../../Gql/Query\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { UserContext } from \"../../Context\";\nimport { ContactClienBytMail } from \"../../../Service\";\nimport { ButtonSend, ButtonCancel } from \"../../Shared/Button\";\nimport { useForm } from \"antd/lib/form/util\";\n\nexport const Contact = ({\n  customer,\n  visible,\n  onCancel,\n  onSuccess,\n  onError,\n}) => {\n  const { data, loading } = useQuery(MESSAGEBYSUBJECT, {\n    variables: { subject: \"Info\" },\n  });\n  console.log(data);\n  const [form] = useForm();\n  const { user } = useContext(UserContext);\n  const onFinish = () => {\n    form\n      .validateFields()\n      .then(({ subject }) => {\n        ContactClienBytMail({\n          mail: customer.mail,\n          name: customer?.last_name,\n          message:\n            subject === \"Nouveautés\"\n              ? data?.messages.nodes[1].message\n                  .replace(\"{fullName}\", customer?.fullName)\n                  .replace(\"{workshopName}\", user.workshop.name)\n              : data?.messages.nodes[0].message\n                  .replace(\"{fullName}\", customer?.fullName)\n                  .replace(\"{workshopName}\", user.workshop.name),\n\n          subject: subject,\n          url:\n            subject == \"Nouveautés\"\n              ? `${process.env.REACT_APP_ROOT}/galerie`\n              : ``,\n        })\n          .then((res) => {\n            onSuccess(res);\n            console.log(res);\n          })\n          .catch((err) => {\n            onError(err);\n            console.log(err);\n          });\n      })\n      .catch((info) => {\n        console.log(info);\n      });\n  };\n\n  return (\n    <Modal\n      closable={false}\n      visible={visible}\n      bodyStyle={{ margin: 20 }}\n      width={600}\n      footer={[\n        <ButtonSend key=\"send\" onClick={onFinish} />,\n        <ButtonCancel key=\"cancel\" onClick={onCancel} />,\n      ]}\n      title=\"Contacter vos clients\"\n    >\n      <ContactForm\n        form={form}\n        initialValues={customer}\n        /* messages={data?.messages.nodes.map(({ id, message }) => ({\n          id: id,\n          message: message\n\n            .replace(\"{fullName}\", customer?.fullName)\n            .replace(\"{workshopName}\", user.workshop.name),\n        }))}*/\n      />\n    </Modal>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}